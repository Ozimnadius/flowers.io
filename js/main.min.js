//@prepros-append pages/common.js
//@prepros-append pages/inputs.js
//@prepros-append pages/index.js
//@prepros-append pages/sliders.js
//@prepros-append pages/catalog.js

// common.js
function getNumber(str) {
    return parseInt(str.replace(/\s/g, ''));
}

function imageResize(src, cls) {
    if (cls){
        $(cls).not('.logo__img').attr('src', src);
    } else {
        $('img').not('.logo__img').attr('src', src);
    }

}
// imageResize('https://loremflickr.com/440/440','.item__img-img');

function number_format(number, decimals, dec_point, thousands_sep) {
    var i, j, kw, kd, km;
    if (isNaN(decimals = Math.abs(decimals))) {
        decimals = 2;
    }
    if (dec_point == undefined) {
        dec_point = ",";
    }
    if (thousands_sep == undefined) {
        thousands_sep = ".";
    }
    i = parseInt(number = (+number || 0).toFixed(decimals)) + "";
    if ((j = i.length) > 3) {
        j = j % 3;
    } else {
        j = 0;
    }
    km = (j ? i.substr(0, j) + thousands_sep : "");
    kw = i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + thousands_sep);
    kd = (decimals ? dec_point + Math.abs(number - i).toFixed(decimals).replace(/-/, 0).slice(2) : "");
    return km + kw + kd;
}

function prettify(num) {
    var n = num.toString();
    return n.replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g, "$1" + ' ');
}

const wWidth = $(window).width();

$('.jsBuy,.jsOne,.jsFavorites,.jsCompare').on('click', function (e) {
    e.preventDefault();
});

$('input[type=tel]').mask('+7 (999) 999-99-99');






// inputs.js

// range
const rangeFrom = $('.range__input_from'),
    rangeTo = $('.range__input_to'),
    range = $('.range__slider'),
    rangeMin = range.data('min');
rangeMax = range.data('max');

$(".range__slider").ionRangeSlider({
    prettify_enabled: true,
    skin: 'round',
    hide_from_to: true,
    hide_min_max: true,
    onChange: function (data) {
        rangeFrom.val(data.from_pretty);
        rangeTo.val(data.to_pretty);
    },
    onFinish: function (data) {
        //ToDo Здесь должень быть ajax на получение товаров
    },
});
let rangeSlider = $(".range__slider").data("ionRangeSlider");

$('.range__input').on('keypress', function (e) {
    if (e.key.match(/[^0-9]/g) || (this.value == 0 && e.key == 0)) {
        e.preventDefault();
    }
});

$('.range__input').on('input', function (e) {
    let $this = $(this),
        val = '',
        from = getNumber(rangeFrom.val()),
        to = getNumber(rangeTo.val());

    if ($this.hasClass('range__input_from')) {
        if (from < rangeMin) {
            from = rangeMin;
        } else if (from > to) {
            from = to;
        }
        val = from;
    } else {
        if (to > rangeMax) {
            to = rangeMax;
        } else if (to < from) {
            to = from;
        }
        val = to;
    }

    let valPretty = prettify(val);

    rangeSlider.update({
        from: from,
        to: to
    });

    $this.val(valPretty);
});

// select
$('.select').styler();

$('.filter__select').on('change',function (e) {
    //ToDo Здесь должень быть ajax на получение товаров
});
//index.js
$(function () {

    let itemsWrap = $('.ipop__items .row');

    $('.fprice__top').on('click', function (e) {
        let $this = $(this),
            parent = $this.closest('.fprice');
        parent.toggleClass('opened');
    });

    $('body').on('click', function (e) {
        if ($(e.target).closest('.fprice').length == 0) {
            $('.fprice').removeClass('opened');
        }
    });

    $('.ipop__more').on('click', function (e) {
        //ToDo тут должен быт ajax
        let items = $('.ipop__item').clone();
        itemsWrap.append(items);
    });
});
//sliders.js
$(function () {
    let swiperSlider = new Swiper('.swiper-container', {
        spaceBetween: 20,
        slidesPerView: 4,
        scrollbar: {
            el: '.slider__scrollbar-wrap',
            dragSize: 110,
            draggable: true
        },
        navigation: {
            nextEl: '.slider__next',
            prevEl: '.slider__prev',
        },
    });


});
//index.js
$(function () {

    let catalog = $('.catalog__items'),
        btns = $('.catalog__type');

    btns.on('click', function (e) {
        let $this = $(this),
            items = catalog.find('.item');

        //ToDo здесь должен быть ajax

        btns.removeClass('active');
        $this.addClass('active');
        catalog.toggleClass('list blocks');
        items.toggleClass('list blocks');


    });

});

//# sourceMappingURL=main.min.js.map